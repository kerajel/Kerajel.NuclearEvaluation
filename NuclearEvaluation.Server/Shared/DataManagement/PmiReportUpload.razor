@using NuclearEvaluation.Kernel.Models.DataManagement.PMI
<RadzenCard Variant="Variant.Outlined" style="padding: 1rem;">
    <h3>PMI Report Upload</h3>

    <RadzenFieldset Text="PMI Report">
        <RadzenLabel Text="Report Date:" Component="DatePicker" Style="margin-right: 10px; display: block; margin-bottom: 10px;" />

        <ValidatedDateOnlyPicker @ref="reportDatePicker"
                                 Model="@reportSubmission"
                                 PropertyExpression="@(x => x.ReportDate)"
                                 Validator="@PmiReportSubmissionValidator"
                                 AutoCompleteType="AutoCompleteType.Off"
                                 Style="width: 100%; resize:none;"
                                 Rows="5"
                                 DebounceTimeout="TimeSpan.Zero"
                                 TooltipOffsetX="-194" />

        <RadzenButton Text="Select report file in .docx format"
                      Icon="folder_open"
                      Style="margin-right: 10px; margin-bottom: 10px;"
                      Click="TriggerFileInputClick" />

        <InputFile @ref="fileInput"
                   OnChange="OnFileChange"
                   accept=".docx"
                   style="display:none" />

        @if (SelectedFile is not null)
        {
            <RadzenLabel Text=@($"{SelectedFile.Name} - {(SelectedFile.Size.AsMegabytes()):F2} MB")
                         Style="margin-left: 10px; display: block; margin-bottom: 10px;" />
        }

        <RadzenButton Text="Submit"
                      Icon="save"
                      Click="OnSubmit"
                      Disabled="@(!IsFormValid)"
                      Style="margin-top: 10px;" />
    </RadzenFieldset>

    @if (!string.IsNullOrEmpty(ValidationMessage))
    {
        <RadzenAlert Text="@ValidationMessage"
                     Severity="AlertSeverity.Warning"
                     Closeable="true"
                     Style="margin-top: 10px;" />
    }
</RadzenCard>